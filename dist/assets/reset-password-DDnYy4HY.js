import{ag as I,aa as A,r as l,j as s,ah as F,G as r,S as m,O as j,ad as R,ae as C,F as k,B as W,T as p,a as q}from"./index-CFwfqvE-.js";import{A as O}from"./AuthWrapper-Dvr4cKrJ.js";import{u as T,F as D,c as L,a as g}from"./useScriptRef-Bad0gIQL.js";import{A as z}from"./AnimateButton-DH0De8WX.js";import{s as G,a as M}from"./password-strength-_dbWWfI_.js";import{E as V,a as $}from"./EyeInvisibleOutlined-Dq0jcsGS.js";import{I as P,F as u}from"./InputLabel-CTYtuFuE.js";function H(){const h=T(),b=I(),{isLoggedIn:y}=A(),[o,v]=l.useState(),[c,S]=l.useState(!1),B=()=>{S(!c)},E=e=>{e.preventDefault()},x=e=>{const a=G(e);v(M(a))};return l.useEffect(()=>{x("")},[]),s.jsx(D,{initialValues:{password:"",confirmPassword:"",submit:null},validationSchema:L().shape({password:g().max(255).required("Password is required"),confirmPassword:g().required("Confirm Password is required").test("confirmPassword","Both Password must be match!",(e,a)=>a.parent.password===e)}),onSubmit:async(e,{setErrors:a,setStatus:t,setSubmitting:n})=>{try{h.current&&(t({success:!0}),n(!1),F({open:!0,message:"Successfuly reset password.",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{b(y?"/auth/login":"/login",{replace:!0})},1500))}catch(i){console.error(i),h.current&&(t({success:!1}),a({submit:i.message}),n(!1))}},children:({errors:e,handleBlur:a,handleChange:t,handleSubmit:n,isSubmitting:i,touched:d,values:w})=>s.jsx("form",{noValidate:!0,onSubmit:n,children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsxs(r,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(P,{htmlFor:"password-reset",children:"Password"}),s.jsx(j,{fullWidth:!0,error:!!(d.password&&e.password),id:"password-reset",type:c?"text":"password",value:w.password,name:"password",onBlur:a,onChange:f=>{t(f),x(f.target.value)},endAdornment:s.jsx(R,{position:"end",children:s.jsx(C,{"aria-label":"toggle password visibility",onClick:B,onMouseDown:E,edge:"end",color:"secondary",children:c?s.jsx(V,{}):s.jsx($,{})})}),placeholder:"Enter password"})]}),d.password&&e.password&&s.jsx(u,{error:!0,id:"helper-text-password-reset",children:e.password}),s.jsx(k,{fullWidth:!0,sx:{mt:2},children:s.jsxs(r,{container:!0,spacing:2,alignItems:"center",children:[s.jsx(r,{item:!0,children:s.jsx(W,{sx:{bgcolor:o==null?void 0:o.color,width:85,height:8,borderRadius:"7px"}})}),s.jsx(r,{item:!0,children:s.jsx(p,{variant:"subtitle1",fontSize:"0.75rem",children:o==null?void 0:o.label})})]})})]}),s.jsxs(r,{item:!0,xs:12,children:[s.jsxs(m,{spacing:1,children:[s.jsx(P,{htmlFor:"confirm-password-reset",children:"Confirm Password"}),s.jsx(j,{fullWidth:!0,error:!!(d.confirmPassword&&e.confirmPassword),id:"confirm-password-reset",type:"password",value:w.confirmPassword,name:"confirmPassword",onBlur:a,onChange:t,placeholder:"Enter confirm password"})]}),d.confirmPassword&&e.confirmPassword&&s.jsx(u,{error:!0,id:"helper-text-confirm-password-reset",children:e.confirmPassword})]}),e.submit&&s.jsx(r,{item:!0,xs:12,children:s.jsx(u,{error:!0,children:e.submit})}),s.jsx(r,{item:!0,xs:12,children:s.jsx(z,{children:s.jsx(q,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Reset Password"})})})]})})})}function Z(){return s.jsx(O,{children:s.jsxs(r,{container:!0,spacing:3,children:[s.jsx(r,{item:!0,xs:12,children:s.jsxs(m,{sx:{mb:{xs:-.5,sm:.5}},spacing:1,children:[s.jsx(p,{variant:"h3",children:"Reset Password"}),s.jsx(p,{color:"secondary",children:"Please choose your new password"})]})}),s.jsx(r,{item:!0,xs:12,children:s.jsx(H,{})})]})})}export{Z as default};
