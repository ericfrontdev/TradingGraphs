import{ag as g,aa as u,j as e,ah as f,G as a,S as d,O as b,T as l,a as v,L as k}from"./index-CFwfqvE-.js";import{A as y}from"./AuthWrapper-Dvr4cKrJ.js";import{u as w,F,c as A,a as P}from"./useScriptRef-Bad0gIQL.js";import{A as I}from"./AnimateButton-DH0De8WX.js";import{I as L,F as m}from"./InputLabel-CTYtuFuE.js";function B(){const o=w(),h=g(),{isLoggedIn:x,resetPassword:p}=u();return e.jsx(e.Fragment,{children:e.jsx(F,{initialValues:{email:"",submit:null},validationSchema:A().shape({email:P().email("Must be a valid email").max(255).required("Email is required")}),onSubmit:async(s,{setErrors:n,setStatus:r,setSubmitting:t})=>{try{await p(s.email).then(()=>{r({success:!0}),t(!1),f({open:!0,message:"Check mail for reset password link",variant:"alert",alert:{color:"success"}}),setTimeout(()=>{h(x?"/auth/check-mail":"/check-mail",{replace:!0})},1500)},i=>{r({success:!1}),n({submit:i.message}),t(!1)})}catch(i){console.error(i),o.current&&(r({success:!1}),n({submit:i.message}),t(!1))}},children:({errors:s,handleBlur:n,handleChange:r,handleSubmit:t,isSubmitting:i,touched:c,values:j})=>e.jsx("form",{noValidate:!0,onSubmit:t,children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsxs(a,{item:!0,xs:12,children:[e.jsxs(d,{spacing:1,children:[e.jsx(L,{htmlFor:"email-forgot",children:"Email Address"}),e.jsx(b,{fullWidth:!0,error:!!(c.email&&s.email),id:"email-forgot",type:"email",value:j.email,name:"email",onBlur:n,onChange:r,placeholder:"Enter email address",inputProps:{}})]}),c.email&&s.email&&e.jsx(m,{error:!0,id:"helper-text-email-forgot",children:s.email})]}),s.submit&&e.jsx(a,{item:!0,xs:12,children:e.jsx(m,{error:!0,children:s.submit})}),e.jsx(a,{item:!0,xs:12,sx:{mb:-2},children:e.jsx(l,{variant:"caption",children:"Do not forgot to check SPAM box."})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(I,{children:e.jsx(v,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",color:"primary",children:"Send Password Reset Email"})})})]})})})})}function W(){const{isLoggedIn:o}=u();return e.jsx(y,{children:e.jsxs(a,{container:!0,spacing:3,children:[e.jsx(a,{item:!0,xs:12,children:e.jsxs(d,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:[e.jsx(l,{variant:"h3",children:"Forgot Password"}),e.jsx(l,{component:k,to:o?"/auth/login":"/login",variant:"body1",sx:{textDecoration:"none"},color:"primary",children:"Back to Login"})]})}),e.jsx(a,{item:!0,xs:12,children:e.jsx(B,{})})]})})}export{W as default};
